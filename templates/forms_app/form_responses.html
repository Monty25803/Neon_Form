{% extends 'base.html' %}

{% block title %}Responses - {{ form_model.title }}{% endblock %}

{% block content %}
<div class="neon-card">
  <h2 class="form-title">{{ form_model.title }} â€” Responses</h2>
  <p style="color: var(--text-muted); margin-bottom: 1.5rem;">{{ response_rows|length }} response(s)</p>

  {% if response_rows %}
  <div style="overflow-x: auto;">
    <table class="responses-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Submitted</th>
          {% for question in form_model.questions.all %}
          <th>{{ question.text|truncatewords:5 }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for response, answer_list in response_rows %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ response.submitted_at|date:"M d, Y H:i" }}</td>
          {% for answer_text in answer_list %}
          <td>{{ answer_text|truncatewords:10 }}</td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <p style="color: var(--text-muted);">No responses yet.</p>
  {% endif %}

  <div style="margin-top: 1.5rem;">
    <a href="{% url 'form_detail' form_model.id %}" class="btn-neon">Fill form</a>
    <a href="{% url 'home' %}" class="btn-neon" style="margin-left: 0.5rem; border-color: var(--text-muted); color: var(--text-muted);">Back</a>
  </div>
</div>
{% endblock %}
